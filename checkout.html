<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>techHive - Checkout</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

    <style>
        .form-control.error {
            border-color: #dc3545;
        }

        .error-message {
            color: #dc3545;
            font-size: 0.875em;
            margin-top: 0.25rem;
        }

        .checkout-item {
            border-bottom: 1px solid #dee2e6;
            padding: 1rem 0;
        }

        .checkout-item:last-child {
            border-bottom: none;
        }
    </style>
</head>

<body>
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <!-- Spinner End -->


    <!-- Topbar Start -->
    <div class="container-fluid d-none border-bottom d-lg-block">
        <div class="row align-items-center">
            <div class="col-lg-4 text-center text-lg-start mb-lg-0">
                <div class="d-inline-flex align-items-center" style="height: 45px;">
                    <a href="guide.html" class="text-muted me-2"> Help</a>
                    <a href="contact.html" class="text-muted me-2"> Support</a>
                    <a href="contact.html" class="text-muted me-2"> Contact</a>
                </div>
            </div>
            <div class="col-lg-4 text-center d-flex align-items-center justify-content-center">
                <small class="text-dark">Call Us:</small>
                <a href="#" class="text-muted">+60 16-234 5393</a>
            </div>

            <div class="col-lg-4 text-center text-lg-end">
                <div class="d-inline-flex align-items-center" style="height: 45px;">
                    <a href="index.html" class="text-muted ms-2">
                        <i class="fa fa-home me-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid px-5 py-4 d-none d-lg-block">
        <div class="row gx-0 align-items-center text-center">
            <div class="col-md-4 col-lg-3 text-center text-lg-start">
                <div class="d-inline-flex align-items-center">
                    <a href="" class="navbar-brand p-0">
                        <h1 class="display-5 text-primary m-0"><i
                                class="fas fa-shopping-bag text-secondary me-2"></i>techHive
                        </h1>
                    </a>
                </div>
            </div>

            <div class="col-md-4 col-lg-3 ms-auto text-end">
                <div class="d-inline-flex align-items-center">
                    <!-- Login icon -->
                    <a href="login.html" class="text-muted d-flex align-items-center justify-content-center me-3">
                        <span class="rounded-circle btn-md-square border">
                            <i class="fas fa-user"></i>
                        </span>
                    </a>

                    <!-- Cart icon -->
                    <a href="cart.html" class="text-muted d-flex align-items-center justify-content-center">
                        <span class="rounded-circle btn-md-square border">
                            <i class="fas fa-shopping-cart"></i>
                        </span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Navbar & Hero Start -->
    <div class="container-fluid nav-bar p-0">
        <div class="row gx-0 bg-primary px-5 align-items-center">

            <div class="col-lg-3 d-none d-lg-block">
                <nav class="navbar navbar-light position-relative" style="width: 250px;">
                    <button class="navbar-toggler border-0 fs-4 w-100 px-0 text-start" type="button"
                        data-bs-toggle="collapse" data-bs-target="#allCat">
                        <h4 class="m-0"><i class="fa fa-bars me-2"></i>All Pages</h4>
                    </button>

                    <div class="collapse navbar-collapse rounded-bottom mt-2" id="allCat">
                        <ul class="list-unstyled categories-bars mb-0">
                            <li>
                                <div class="categories-bars-item">
                                    <a href="index.html" class="active">Home</a>
                                </div>
                            </li>
                            <li>
                                <div class="categories-bars-item">
                                    <a href="about.html">About</a>
                                </div>
                            </li>
                            <li>
                                <div class="categories-bars-item">
                                    <a href="contact.html">Contact</a>
                                </div>
                            </li>
                            <li>
                                <div class="categories-bars-item">
                                    <a href="shop.html">Shop</a>
                                </div>
                            </li>
                            <li>
                                <div class="categories-bars-item">
                                    <a href="compare.html">Compare</a>
                                </div>
                            </li>
                            <li>
                                <div class="categories-bars-item">
                                    <a href="product-detail.html">Detail</a>
                                </div>
                            </li>
                            <li>
                                <div class="categories-bars-item">
                                    <a href="guide.html">Guide</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>

            <div class="col-12 col-lg-9">
                <nav class="navbar navbar-expand-lg navbar-light bg-primary ">
                    <a href="" class="navbar-brand d-block d-lg-none">
                        <h1 class="display-5 text-secondary m-0"><i
                                class="fas fa-shopping-bag text-white me-2"></i>techHive</h1>
                    </a>
                    <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarCollapse">
                        <span class="fa fa-bars fa-1x"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarCollapse">
                        <div class="navbar-nav ms-auto py-0">
                            <a href="index.html" class="nav-item nav-link">Home</a>
                            <a href="shop.html" class="nav-item nav-link">Shop</a>
                            <a href="bestseller.html" class="nav-item nav-link">New & Best Seller</a>
                            <a href="compare.html" class="nav-item nav-link">Compare</a>
                            <a href="guide.html" class="nav-item nav-link">Guide</a>
                            <a href="about.html" class="nav-item nav-link me-2">About Us</a>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </div>
    <!-- Navbar & Hero End -->

    <!-- Single Page Header start -->
    <div class="container-fluid page-header py-5">
        <h1 class="text-center text-white display-6 wow fadeInUp" data-wow-delay="0.1s">Checkout</h1>
        <ol class="breadcrumb justify-content-center mb-0 wow fadeInUp" data-wow-delay="0.3s">
            <li class="breadcrumb-item"><a href="index.html">Home</a></li>
            <li class="breadcrumb-item"><a href="shop.html">Shop</a></li>
            <li class="breadcrumb-item"><a href="cart.html">Cart</a></li>
            <li class="breadcrumb-item active text-white">Checkout</li>
        </ol>
    </div>
    <!-- Single Page Header End -->

    <!-- Checkout Page Start -->
    <div class="container-fluid py-5">
        <div class="container py-5">
            <div class="row g-5">
                <!-- Order Summary -->
                <div class="col-lg-6">
                    <h3 class="mb-4">Order Summary</h3>
                    <div class="bg-light rounded p-4">
                        <div id="checkoutItems">
                            <!-- Items will be loaded here by JavaScript -->
                        </div>
                        <hr>
                        <div class="d-flex justify-content-between mb-3">
                            <h5>Subtotal:</h5>
                            <h5 id="checkoutSubtotal">RM0.00</h5>
                        </div>
                        <div class="d-flex justify-content-between mb-3">
                            <h5>Shipping:</h5>
                            <h5>Free</h5>
                        </div>
                        <hr>
                        <div class="d-flex justify-content-between">
                            <h4>Total:</h4>
                            <h4 id="checkoutTotal">RM0.00</h4>
                        </div>
                        <button class="btn btn-primary w-100 mt-4" id="proceedCheckoutBtn">Proceed to Payment</button>
                    </div>
                </div>

                <!-- Payment Form (Initially Hidden) -->
                <div class="col-lg-6" id="paymentSection" style="display: none;">
                    <h3 class="mb-4">Payment Information</h3>
                    <form id="paymentForm" class="bg-light rounded p-4">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Full Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="fullName" placeholder="e.g. John Doe"
                                    required>
                                <div class="error-message" id="fullNameError"></div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Phone Number <span class="text-danger">*</span></label>
                                <input type="tel" class="form-control" id="phone" placeholder="e.g. +60 12-345 6789"
                                    required>
                                <div class="error-message" id="phoneError"></div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Address <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="address"
                                placeholder="e.g. 123 Main Street, City, State 12345" required>
                            <div class="error-message" id="addressError"></div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Email <span class="text-danger">*</span></label>
                            <input type="email" class="form-control" id="email" placeholder="e.g. john.doe@example.com"
                                required>
                            <div class="error-message" id="emailError"></div>
                        </div>

                        <hr>
                        <h5 class="mb-3">Card Information</h5>

                        <div class="mb-3">
                            <label class="form-label">Card Number <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="cardNumber"
                                placeholder="e.g. 1234 5678 9012 3456" maxlength="19" required>
                            <div class="error-message" id="cardNumberError"></div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Expiry Date <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="expiryDate" placeholder="e.g. MM/YY"
                                    maxlength="5" required>
                                <div class="error-message" id="expiryError"></div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">CVV <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="cvv" placeholder="e.g. 123" maxlength="4"
                                    required>
                                <div class="error-message" id="cvvError"></div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Cardholder Name <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="cardholderName" placeholder="e.g. JOHN DOE"
                                required>
                            <div class="error-message" id="cardholderError"></div>
                        </div>

                        <button type="submit" class="btn btn-success w-100">Pay Now</button>
                    </form>
                </div>

                <!-- Empty Cart Message -->
                <div class="col-12 text-center" id="emptyCartMessage" style="display: none;">
                    <div class="py-5">
                        <i class="fas fa-shopping-cart fa-3x text-muted mb-3"></i>
                        <h4>Your cart is empty</h4>
                        <p class="text-muted">Add some items to your cart before proceeding to checkout.</p>
                        <a href="shop.html" class="btn btn-primary">Continue Shopping</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Checkout Page End -->

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <!-- About -->
                <div class="footer-section">
                    <h3>About Us</h3>
                    <p>At <strong>techHive</strong> we curate performance PC peripherals you’ll actually love—mice,
                        keyboards and headsets from trusted brands. We compare specs, test real-world feel, and price
                        them fairly so you can build a setup that’s fast, reliable and within budget.</p>

                    <div class="social-links">
                        <!-- Instagram -->
                        <a href="https://www.instagram.com/techhive1957/" class="social-link" aria-label="Instagram"
                            title="Instagram">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <rect x="3" y="3" width="18" height="18" rx="5"></rect>
                                <circle cx="12" cy="12" r="4"></circle>
                                <circle cx="17.5" cy="6.5" r="1.2" fill="currentColor" stroke="none"></circle>
                            </svg>
                        </a>
                        <!-- Facebook -->
                        <a href="https://web.facebook.com/profile.php?id=61580047975004" class="social-link"
                            aria-label="Facebook" title="Facebook">
                            <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                <path
                                    d="M22 12.07C22 6.48 17.52 2 11.93 2S2 6.48 2 12.07C2 17.1 5.66 21.25 10.44 22v-7.02H7.9v-2.91h2.54V9.41c0-2.5 1.49-3.89 3.77-3.89 1.09 0 2.23.2 2.23.2v2.46h-1.25c-1.24 0-1.62.77-1.62 1.56v1.87h2.77l-.44 2.91h-2.33V22C18.34 21.25 22 17.1 22 12.07z">
                                </path>
                            </svg>
                        </a>
                        <!-- X -->
                        <a href="https://x.com/techHIve1957" class="social-link" aria-label="X" title="X">
                            <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                <path d="M3 2h6.9l4.4 5.1L21 2h0l-7.6 8.7L22 22h-6.8l-5.2-6L4.2 22H3.1l8.4-9.4L3 2z">
                                </path>
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="shop.html">Shop</a></li>
                        <li><a href="compare.html">Compare</a></li>
                        <li><a href="guide.html">Product Guides</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>

                <!-- Customer Care (replaces Services) -->
                <div class="footer-section">
                    <h3>Customer Care</h3>
                    <ul class="footer-links">
                        <li><a href="#">Order Tracking</a></li>
                        <li><a href="#">Shipping &amp; Delivery</a></li>
                        <li><a href="#">Returns &amp; Warranty</a></li>
                        <li><a href="#">Payment Methods</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>

                <!-- Contact -->
                <div class="footer-section">
                    <h3>Contact Info</h3>
                    <div class="contact-info"><i>📍</i>
                        <span>Universiti Tunku Abdul Rahman (UTAR), Jalan Universiti, Bandar Barat, 31900 Kampar,
                            Perak</span>
                    </div>
                    <div class="contact-info"><i>📞</i><span>05-468 8888</span></div>
                    <div class="contact-info"><i>✉️</i><span>study.utar.edu.my</span></div>
                    <div class="newsletter" aria-label="Subscribe to our newsletter">
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <div class="copyright">© 2025 techHive. All rights reserved.</div>
                    <ul class="footer-bottom-links">
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Cookie Policy</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <script>
        // Checkout functionality
        let cart = [];

        // Load cart from localStorage (using same format as cart.js)
        function loadCart() {
            try {
                return JSON.parse(localStorage.getItem('cart')) || [];
            } catch (e) {
                return [];
            }
        }

        // Format currency
        function fmt(n) {
            return 'RM' + Number(n || 0).toFixed(2);
        }

        // Update cart UI
        function updateCartUI() {
            const cart = loadCart();
            const cartCount = cart.reduce((t, i) => t + i.quantity, 0);
            $('.cart-count').text(cartCount);
        }

        // Display checkout items
        function displayCheckoutItems() {
            cart = loadCart();
            const $itemsContainer = $('#checkoutItems');
            const $emptyMessage = $('#emptyCartMessage');
            const $orderSection = $('.col-lg-6').first();

            if (cart.length === 0) {
                $orderSection.hide();
                $emptyMessage.show();
                return;
            }

            $emptyMessage.hide();
            $orderSection.show();

            let html = '';
            let subtotal = 0;

            cart.forEach(item => {
                const total = item.price * item.quantity;
                subtotal += total;

                html += `
                    <div class="checkout-item">
                        <div class="row align-items-center">
                            <div class="col-2">
                                ${item.image ? `<img src="${item.image}" class="img-fluid rounded" alt="${item.name}">` : '<div class="bg-light rounded p-2 text-center"><i class="fas fa-image"></i></div>'}
                            </div>
                            <div class="col-6">
                                <h6 class="mb-1">${item.name}</h6>
                                <small class="text-muted">${item.category || ''}</small>
                            </div>
                            <div class="col-2 text-center">
                                <span>×${item.quantity}</span>
                            </div>
                            <div class="col-2 text-end">
                                <span class="fw-bold">${fmt(total)}</span>
                            </div>
                        </div>
                    </div>
                `;
            });

            $itemsContainer.html(html);
            $('#checkoutSubtotal').text(fmt(subtotal));
            $('#checkoutTotal').text(fmt(subtotal));
        }

        // Show payment form
        $('#proceedCheckoutBtn').on('click', function () {
            $('#paymentSection').slideDown();
            $(this).prop('disabled', true).text('Payment Form Opened');
        });

        // Card number formatting
        $('#cardNumber').on('input', function () {
            let value = $(this).val().replace(/\s+/g, '').replace(/[^0-9]/gi, '');
            let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
            $(this).val(formattedValue);
        });

        // Expiry date formatting
        $('#expiryDate').on('input', function () {
            let value = $(this).val().replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            $(this).val(value);
        });

        // CVV formatting
        $('#cvv').on('input', function () {
            let value = $(this).val().replace(/\D/g, '');
            $(this).val(value);
        });

        // Form validation
        function validateForm() {
            let isValid = true;

            // Clear previous errors
            $('.form-control').removeClass('error');
            $('.error-message').text('');

            // Validation rules
            const fields = [
                { id: 'fullName', message: 'Full name is required' },
                { id: 'phone', message: 'Phone number is required' },
                { id: 'address', message: 'Address is required' },
                { id: 'email', message: 'Email is required' },
                { id: 'cardNumber', message: 'Card number is required' },
                { id: 'expiryDate', message: 'Expiry date is required' },
                { id: 'cvv', message: 'CVV is required' },
                { id: 'cardholderName', message: 'Cardholder name is required' }
            ];

            fields.forEach(field => {
                const $input = $('#' + field.id);
                const value = $input.val().trim();

                if (!value) {
                    $input.addClass('error');
                    $('#' + field.id + 'Error').text(field.message);
                    isValid = false;
                }
            });

            // Email validation
            const email = $('#email').val().trim();
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (email && !emailRegex.test(email)) {
                $('#email').addClass('error');
                $('#emailError').text('Please enter a valid email address');
                isValid = false;
            }

            // Card number validation (basic)
            const cardNumber = $('#cardNumber').val().replace(/\s/g, '');
            if (cardNumber && cardNumber.length < 13) {
                $('#cardNumber').addClass('error');
                $('#cardNumberError').text('Card number must be at least 13 digits');
                isValid = false;
            }

            // CVV validation
            const cvv = $('#cvv').val();
            if (cvv && (cvv.length < 3 || cvv.length > 4)) {
                $('#cvv').addClass('error');
                $('#cvvError').text('CVV must be 3 or 4 digits');
                isValid = false;
            }

            return isValid;
        }

        // Handle form submission
        $('#paymentForm').on('submit', function (e) {
            e.preventDefault();

            if (!validateForm()) {
                return;
            }

            // Show confirmation dialog
            const total = $('#checkoutTotal').text();
            const confirmed = confirm(`Confirm your purchase of ${total}?\n\nClick OK to proceed with payment or Cancel to review your order.`);

            if (confirmed) {
                // Simulate payment processing
                const $submitBtn = $(this).find('button[type="submit"]');
                $submitBtn.prop('disabled', true).html('<i class="fas fa-spinner fa-spin"></i> Processing...');

                setTimeout(() => {
                    // Clear cart
                    localStorage.removeItem('cart');

                    // Show success message
                    alert('Payment successful! Your order has been placed. Thank you for your purchase!');

                    // Redirect to shop or home page
                    window.location.href = 'shop.html';
                }, 2000);
            }
        });

        // Initialize page
        $(document).ready(function () {
            updateCartUI();
            displayCheckoutItems();
        });
    </script>

    <script src="js/main.js"></script>
</body>

</html>